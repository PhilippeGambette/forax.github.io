<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>JavaScript - Objet, DOM, JSON, AJAX</title>

		<meta name="description" content="javascript, data structure, DOM">
		<meta name="author" content="Remi Forax">

		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/black.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
		
		<!-- autojs result -->
		<style>
		  div.autojsresult {
		    text-align: left;
		    color: lime;
		  }
		  div.autojslog {
		    color: orange;
		  }
		  div.autojserror {
		    color: red;
		  }
		  .bad-container {
            position: relative;
            display:inline-block;
          }
		  .bad-image:after {
            content: url(images/js/bad.png);
            position: absolute;
            z-index: 9999;
            right: 5px;
            bottom: 0px;
          }
		</style>
	</head>

	<body>

		<div class="reveal">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
                                <section>
					<h1>JavaScript</h1>
                                       <br/>
                                        <h2>Objet, DOM, JSON, AJAX</h2>
					<p>
					  Remi Forax
					</p>
				</section>
				
				      
				                <section>
				                        <h2>Dictionnaire / Objet</h2>
				                </section>
                                <section>
					<h2>Dictionary ?</h2>
					<blockquote cite="https://en.wikipedia.org/wiki/Associative_array">
					  &ldquo;In computer science, an associative array, map, symbol table, or dictionary is an abstract data type composed of a collection of (key, value) pairs, such that each possible key appears just once in the collection.&rdquo;
					</blockquote>
                                        <p align="right">
                                         source: Wikipedia.com - <a href="https://en.wikipedia.org/wiki/Associative_array">Dictionary</a>
                                        </p>
				</section>
				<section>
					<h2>Dictionnaire ?</h2>
					<blockquote cite="https://en.wikipedia.org/wiki/Associative_array">
					  &ldquo;En informatique, un tableau associatif, map, table des symboles, ou dictionnaire est un type abstrait composé d'une collection de couples (clé, valeur), tel que chaque clé possible apparait une seule fois dans la collection.&rdquo;
					</blockquote>
                                        <p align="right">
                                         source: Wikipedia.com - <a href="https://en.wikipedia.org/wiki/Associative_array">Dictionnaire</a>
                                        </p>
				</section>
				<section>
					                    <h2>Dictionnaire</h2>
					                    <p>
                                          Un dictionnaire en Javascript se déclare entre <b>{</b> et <b>}</b>
                                         <br/>
                                          Une clé et une valeur sont séparées par <code>:</code>, les couples sont séparés par des virgules
                                         </p>
                                        <p>&nbsp;</p>
                                        <small><textarea autojs="js-dict1" rows="6" cols="35">
{'key': 'value' } 
{ wheels: 4, seats: 2 }

{ color: 'red', align: true }
{}    /* empty dictionary */
                                        </textarea></small>
                                        <small><div id="js-dict1"></div></small>
                                        <p>&nbsp;</p>
                                        <p>
                                         En Javascript, les clés sont forcéments des <b>string</b>s !
                                        </p>
				</section>
				<section>
					                    <h2>Accéder aux valeurs</h2>
					                    <p>
                                         L'opération '.' (<b>dot</b>) permet d'obtenir la valeur correspondant à une clé
                                         </p>
                                        <p>&nbsp;</p>
                                        <small><textarea autojs="js-dict-index" rows="6" cols="35">
var dict = { wheels: 4, seats: 2 };
dict.wheels
dict.seats

dict.foo
                                        </textarea></small>
                                        <small><div id="js-dict-index"></div></small>
                                        <p>&nbsp;</p>
                                        <p>
                                         Dans la cas ou la clé n'existe pas, la valeur est <b>undefined</b>
                                        </p>
				</section>
				<section>
					                    <h2>Accéder aux valeurs (2)</h2>
					                    <p>
                                         Comme pour les tableaux, il est possible d'utiliser les <b>[</b> <b>]</b>
                                         pour obtenir la valeur correspondant à une clé
                                         </p>
                                        <p>&nbsp;</p>
                                        <small><textarea autojs="js-dict-index2" rows="6" cols="35">
var dict = { wheels: 4, seats: 2 };
dict["wheels"]
dict["seats"]

dict["foo"]
                                        </textarea></small>
                                        <small><div id="js-dict-index2"></div></small>
                                        <p>&nbsp;</p>
                                        <p>
                                         On utilise <b>.</b> si la clé est constante, <b>[]</b> si la clé est une <b>string</b>
                                        </p>
				</section>
				<section>
					                    <h2>Dictionnaire dynamique</h2>
					                    <p>
                                         Il est possible de changer la valeur associée une clé ou d'ajouter
                                         un couple clé/valeur
                                         </p>
                                        <p>&nbsp;</p>
                                        <small><textarea autojs="js-dict-dyn" rows="8" cols="35">
var basket = { apple: 3, pear: 2 };
basket.apple = 4;
basket.apple

basket.orange = 1;
basket["banana"] = 1;
basket
                                        </textarea></small>
                                        <small><div id="js-dict-dyn"></div></small>
                                        <p>&nbsp;</p>
                                        <p>
                                         
                                        </p>
				</section>
				<section>
					                    <h2>Pas de clé en double !</h2>
					                    <p>
                                         Le dictionnaire indexe les valeurs par leur clé,
                                         il ne peut y avoir qu'une seule valeur pour une clé donnée
                                         </p>
                                        <p>&nbsp;</p>
                                        <small><textarea autojs="js-dict-key" rows="8" cols="30">
var dict = { dog: 3, dog: 4 };

dict.dog = 5;
dict

dict["dog"] = 6;
dict
                                        </textarea></small>
                                        <small><div id="js-dict-key"></div></small>
                                        <p>&nbsp;</p>
                                        <p>
                                         
                                        </p>
				</section>
				<section>
					                    <h2>Object vs Dictionary</h2>
					                    <p>
                                         En JavaScript, les dictionnaires ne sont pas appelés 'dictionary' mais 'object'
                                        </p><p>
                                         L'affichage par défaut (<b>toString()</b>) n'est pas intéressant, on utilise <b>JSON.stringify()</b> à la place
                                        </p>
                                        <p>&nbsp;</p>
                                        <small><textarea autojs="js-dict-object" rows="5" cols="30">
var dict = { 'object': 'dictionary' };
dict.toString()

JSON.stringify(dict)
                                        </textarea></small>
                                        <small><div id="js-dict-object"></div></small>
                                        <p>&nbsp;</p>
                                        <p>
                                         <a href="http://json.org/">JSON</a> = JavaScript Object Notation  
                                        </p>
				</section>
				<section>
					                    <h2>Le tableau des clés</h2>
					                    <p>
                                         La fonction <b>Object.keys</b> renvoie un tableau
                                         des clés d'un objet
                                         </p>
                                        <p>&nbsp;</p>
                                        <small><textarea autojs="js-object-keys" rows="4" cols="30">
var letters = { 'a': 1, 'b': 2 };

Object.keys(letters)
                                        </textarea></small>
                                        <small><div id="js-object-keys"></div></small>
                                        <p>&nbsp;</p>
                                        <p>
                                         
                                        </p>
				</section>
				
				<section>
					                    <h2>Parcourir un objet</h2>
					                    <p>
                                         On peut pas parcourir un objet directement,
                                         il faut parcourir ses clés, puis pour chaque clé on peut aller chercher la valeur
                                         </p>
                                        <p>&nbsp;</p>
                                        <small><textarea autojslog="js-object-iter" rows="9" cols="40">
var dict = { 'a': 1, 'b': 2, 'c': 3 };
var keys = Object.keys(dict);
var i;
var key;
for(i = 0; i < keys.length; i++) {
  key = keys[i];
  console.log(key + "=" + dict[key]);
}
                                        </textarea></small>
                                        <p></p>
                                        <small>
                                          <div id="js-object-iter" class="autojslog"></div>
                                        </small>
                                        <p>
                                         
                                        </p>
				</section>
				<section>
					                    <h2>Parcourir un objet (2)</h2>
					                    <p>
                                         Il existe une syntaxe spéciale pour parcourir les dictionnaires,
                                         <b>for(<em>variable</em>&nbsp;in&nbsp;<em>dict</em>)</b> (comme en Python)
                                         </p>
                                        <p>&nbsp;</p>
                                        <small><textarea autojslog="js-object-for-in" rows="5" cols="40">
var dict = { 'a': 1, 'b': 2, 'c': 3 };
for(key in dict) {
  console.log(key + "=" + dict[key]);
}
                                        </textarea></small>
                                        <p></p>
                                        <small>
                                          <div id="js-object-for-in" class="autojslog"></div>
                                        </small>
                                        <p><small>
                                         Cette syntaxe est éuivalente au code qui utilise <b>Object.keys()</b>
                                        </small></p>
				</section>
				
				<section>
					                    <h2>Regrouper des propriétés</h2>
					                    <p>
					                     Un objet permet de regrouper des propriétés ayant trait à un même concept,
					                     ce qui permet de structurer le code
                                        </p>
                                        <small><textarea autojslog="js-object-as-struct" rows="10" cols="40">
function isAdult(person) {
  return person.age >= 21;
}

var john = { name: "John", age: 23 };
var jane = { name: "Jane", age: 18 };

console.log(isAdult(john));
console.log(isAdult(jane));
                                        </textarea></small>
                                        <p></p>
                                        <small>
                                          <div id="js-object-as-struct" class="autojslog"></div>
                                        </small>
                                        <p></p>
				</section>
				
				<section>
					                    <h2>Fonction vs Méthode</h2>
					                    <p>
					                     Un objet peut aussi contenir des fonctions comme valeurs
					                    <br/>
					                     Une fonction dans un objet est appelé une méthode
                                        </p>
                                        <small><textarea autojslog="js-object-method" rows="10" cols="40">
var square = {
  surface: function(x) { return x * x; }
};
var disc = {
  surface: function(r) { return Math.PI * r * r; }
};

console.log(square.surface(3));
console.log(disc.surface(3));
                                        </textarea></small>
                                        <p></p>
                                        <small>
                                          <div id="js-object-method" class="autojslog"></div>
                                        </small>
                                        <p></p>
				</section>
				<section>
					                    <h2>this</h2>
					                    <p>
					                     Paramètre implicite qui contient l'objet sur lequel
					                    <br/>
					                     on a appelé une méthode
					                    <br/>
					                     (l'objet sur lequel on utilise l'opérateur '.')
                                        </p>
                                        <small><textarea autojslog="js-object-this" rows="8" cols="40">
var square = {
  side: 2,
  surface: function() {
   return this.side * this.side;
  }
};
console.log(square.surface());
                                        </textarea></small>
                                        <p></p>
                                        <small>
                                          <div id="js-object-this" class="autojslog"></div>
                                        </small>
                                        <p>&nbsp;</p>
				</section>
				<section>
					                    <h2>this et appel de fonction</h2>
					                    <p>
					                     Et si on appel une méthode qui utilise <b>this</b> comme une fonction ?
                                        </p>
                                        <small><div class="bad-container"><textarea autojslog="js-object-this2" rows="10" cols="40">
"use strict";
var square = {
  side: 2,
  surface: function() {
   return this.side * this.side;
  }
};
var f = square.surface;
console.log(f());
                                        </textarea><div class="bad-image"></div></div></small>
                                        <p></p>
                                        <small>
                                          <div id="js-object-this2" class="autojslog"></div>
                                        </small>
                                        <p>
                                         <b>square</b> est appelée comme une fonction et pas une méthode, "this" vaut undefined !
                                        </p>
				</section>
				<section>
		          <img src="images/js-object/this_is_bullshit.png">
				</section>
				
				<section>
					                    <h2>Partage de méthodes :(</h2>
					                    <p>
					                     Si on a deux objets, il faut définir <b>surface</b> deux fois,
					                    <br/> 
					                     même si c'est le même code !?
                                        </p>
                                        <small><div class="bad-container"><textarea autojslog="js-object-prototype" rows="11" cols="50">
var square1 = {
  side: 1,
  surface: function() { return this.side * this.side; }
};
var square2 = {
  side: 2,
  surface: function() { return this.side * this.side; }
};
console.log(square1.surface());
console.log(square2.surface());
                                        </textarea><div class="bad-image"></div></div></small>
                                        <p></p>
                                        <small>
                                          <div id="js-object-prototype" class="autojslog"></div>
                                        </small>
                                        <p>
                                         Ça parait idiot !
                                        </p>
				</section>
				<section>
					                    <h2>Partage de méthode (astuce)</h2>
					                    <p>
					                     Lorsque l'on cherche une propriété, si elle n'existe pas sur l'objet,
					                     on va chercher dans son prototype (récursivement)
                                        </p>
                                        <small><div class="bad-container"><textarea autojslog="js-object-prototype2" rows="11" cols="50">
var shared_square = {
  surface: function() { return this.side * this.side; }
};
var square1 = { side: 1 };
Object.setPrototypeOf(square1, shared_square);
var square2 = { side: 2 };
Object.setPrototypeOf(square2, shared_square);

console.log(square1.surface());
console.log(square2.surface());
                                        </textarea><div class="bad-image"></div></div></small>
                                        <p></p>
                                        <small>
                                          <div id="js-object-prototype2" class="autojslog"></div>
                                        </small>
                                        <p>
                                         <b>setPrototypeOf</b> permet de changer le prototype
                                        </p>
				</section>
				<section>
					                    <h2>setPrototypeOf</h2>
					                    <p>
					                     Attention, changer le prototype d'un objet avec <b>setPrototypOf</b>
					                     alors que celui-ci est déjà créer
					                    <br/> 
					                     est souvent très lent !
					                    </p>
					                    <p>
					                     Firefox écrit même un message
					                     <span style="text-decoration: line-through;">d'insulte</span> d'information
					                    <br/> 
					                     sur la console
                                        </p>
                                        <p style="color: red">
mutating the [[Prototype]] of an object will cause your code to run very slowly;
instead create the object with the correct initial [[Prototype]] value using Object.create
                                        </p>
                                        <p>&nbsp;</p>
				</section>
				<section>
					                    <h2>New permet le partage des méthodes</h2>
					                    <p>
					                     <b>new</b> et la propriété <b>prototype</b> d'une fonction
                                        </p>
                                        <small><textarea autojslog="js-object-new" rows="11" cols="60">
function Square(side) {
  this.side = side;
}
Square.prototype.surface = function() { return this.side * this.side; };

var square1 = new Square(1);
var square2 = new Square(2);

console.log(square1.surface());
console.log(square2.surface());
                                        </textarea></small>
                                        <p></p>
                                        <small>
                                          <div id="js-object-new" class="autojslog"></div>
                                        </small>
                                        <p><small>
                                         <b>new Square</b> crée un objet, initialise celui-ci avec la fonction <b>Square</b>
                                         et indique que son prototype est la valeur de <b>Square.prototype</b>
                                        </small></p>
				</section>
				<section>
					                    <h2>Création d'objets</h2>
					                    <p>
					                     Deux syntaxes !
					                    </p>
					                    <dl>
					                     <dt>Avec les accolades :
					                     <dd>si on n'a que des valeurs, ou un seul objet (singleton comme Math)
					                    <br/>
					                     <small><textarea rows="2" cols="35">
var foo = { key1: 2, key2: 'hello' };
					                     </textarea></small>
					                     <p></p>
					                     <dt>Avec new :
					                     <dd>si on a plusieurs objets avec des méthodes
					                     <small><textarea rows="6" cols="55">
function Foo(key1, key2) { this.key1 = key1; this.key2 = key2; }
Foo.prototype.meth1 = function() { return this.key1; };
Foo.prototype.meth2 = function() { return this.key2; };

var foo = new Foo(2, 'hello');
					                     </textarea></small>
					                    </dl>
				</section>
				
				<section>
					                    <h2>Exemple</h2>
					                    <span style="float: inline-block">
                                        <small><textarea autojscanvas="js-object-matrix" once="true" rows="23" cols="55">
var canvas = document.getElementById('js-object-matrix');
var context = canvas.getContext("2d"); 
var data = [ 'U', 'P', 'E', 'M' ];             
function Snake(x) {
  this.x = x;
  this.y = Math.floor(canvas.height * Math.random());
}
Snake.prototype.draw = function(context) {
  context.fillStyle = 'rgb(0, 255 , 0)';
  for(var i = 0; i < data.length; i++) {
    context.fillText(data[i], 15 * this.x, this.y - 15 * i);
    context.fillStyle = 'rgb(0, 164, 0)';
  }
  this.y = this.y + 10;
  if (this.y > canvas.height) this.y = 0;
}
snakes = [];
for(var i = 0; i < 20; i++) { snakes.push(new Snake(i)); }
window.setInterval(function() {
  context.clearRect(0, 0, canvas.width, canvas.height);
  snakes.forEach(function(snake) { snake.draw(context); });
}, 50);
                                          
                                        </textarea></small>
                                        </span><span style="display: inline-block">
                                        <canvas id="js-object-matrix"
                                                width="300"
                                                height="600">
                                        </canvas>
                                        </span>  
                                        
				</section>
				
				<section>
					                    <h2>Document Object Model</h2>
			    </section>
			    <section>
					<h2>DOM ?</h2>
					<blockquote cite="https://en.wikipedia.org/wiki/Document_Object_Model">
					  &ldquo;The Document Object Model (DOM) is a cross-platform and language-independent convention for representing and interacting with objects in HTML, XHTML, and XML documents.&rdquo;
					</blockquote>
                                        <p align="right">
                                         source: Wikipedia.com - <a href="https://en.wikipedia.org/wiki/Document_Object_Model">DOM</a>
                                        </p>
				</section>
				<section>
					<h2>DOM ?</h2>
					<blockquote cite="https://en.wikipedia.org/wiki/Document_Object_Model">
					  &ldquo;Le modèle objet de document (DOM) est une convention indépendante d'un language et multi-plateforme pour représenter et interagir avec des objets issus de documents HTML, XHTML et XML.&rdquo;
					</blockquote>
                                        <p align="right">
                                         source: Wikipedia.com - <a href="https://en.wikipedia.org/wiki/Document_Object_Model">DOM</a>
                                        </p>
				</section>
				
				<section>
				                        <div id="dom-example">
					                    <h2>Arbre DOM</h2>
					                    <p>
					                     L'API DOM permet de manipuler l'arbre correspondant
					                    <br/> 
					                     à une page HTML en JavaScript
                                        </p>
                                        <p>&nbsp;</p>
                                        <small><textarea autojs="js-dom1" rows="9" cols="55">
document.toString()
var element = document.getElementById("dom-example");
element.toString()
element.tagName
element.attributes[0].name
element.attributes[0].value
element.children[0].tagName;
element.children[1].tagName;
                                        </textarea></small>
                                        <small><div id="js-dom1"></div></small>
                                        <p><small>
                                         Le document (racine), les élements, les attributs des éléments, le texte à l'intérieur des éléments
					                     sont des noeuds de l'arbre
					                    </small></p>
					                    </div>
				</section>
				<section>
					                    <h2>Children / childNodes</h2>
					                    <p>
					                     Il y a deux façon d'obtenir les fils d'un élement
					                    </p>
					                     <dl id="dom-example2">
					                      <dt>.children</dt><dd>renvoie uniquement les sous-élements</dd>
					                      <dt>.childNodes</dt><dd>renvoie les élements, avec les textes et les commentaires</dd>
					                     </dl>
                                        <p></p>
                                        <small><textarea autojs="js-dom2" rows="9" cols="55">
var element = document.getElementById("dom-example2");
element.tagName
var child = element.children[0];
child.toString()
child.tagName
var text = child.childNodes[0];
text.toString()
text.nodeValue
                                        </textarea></small>
                                        <small><div id="js-dom2"></div></small>
                                        <p>
                                         
					                    </p>
				</section>
				<section>
				                        <div id="dom-example3">
					                    <h2>API DOM</h2>
					                    <p>
					                     L'API est la même quelque soit le language de programmation
					                     donc l'API est intégrée avec aucun language de programmation :(
					                    </p>
					                    <p>&nbsp;</p>
                                        <small><textarea autojs="js-dom3" rows="6" cols="55">
var element = document.getElementById("dom-example3");
element.children.toString()
element.children.length
element.children[0]
element.forEach
                                        </textarea></small>
                                        <small><div id="js-dom3"></div></small>
                                        <p>
                                         <b>chilren</b> et <b>childNodes</b> renvoie des HTMLCollection,
                                        <br/>
                                         pas des Array :(
					                    </p>
					                    </div>
				</section>
				<section>
					                    <h2>Chercher des éléments</h2>
					                     <dl id="dom-example4">
					                      <dt>document.getElementById(id)</dt><dd>renvoie élément par son <b>id</b></dd>
					                      <dt>document.getElementsByClassName(classname)</dt><dd>renvoie les élements ayant la classe</dd>
					                      <dt>document.querySelectorAll(css_selector)</dt><dd>renvoie les élements par un sélecteur CSS</dd>
					                     </dl>
                                        <p>&nbsp;</p>
                                        <small><textarea autojs="js-dom4" rows="6" cols="60">
var cs = document.getElementsByClassName("bad-container");
cs.length

var dts = document.querySelectorAll("dl#dom-example4 dt");
dts.length
                                        </textarea></small>
                                        <small><div id="js-dom4"></div></small>
                                        <p>
                                         
					                    </p>
				</section>
				
				<section>
					                    <h2>Changer le contenu d'un élément</h2>
					                    <dl>
					                     <dt>.innerHTML</dt><dd>accepte le contenu HTML</dd>
					                     <dt>.innerText</dt><dd>uniquement pour le contenu texte</dd>
					                    </dl>
					                    <p></p>
					                    <div style="color: tomato"><small>
					                     <div id="dom-content1"></div>
					                     <div id="dom-content2"></div>
					                    </small></div>
                                        <small><textarea autojslog="js-dom-content" rows="7" cols="60">
var div1 = document.getElementById("dom-content1");
var div2 = document.getElementById("dom-content2");
window.setTimeout(function() {
  div1.innerHTML = "<b>" + new Date() + "</b>";
  div2.innerText = "<b>" + new Date() + "</b>";
}, 1000);
                                        </textarea></small>
                                        <p><small>
                                         element<b>.style</b> permet d'accéder au style d'un élement
                                        </small></p>
                                        <small>
                                          <div id="js-dom-content" class="autojslog"></div>
                                        </small> 
				</section>
				<section>
					                    <h2>Evènement onclick</h2>
					                    <p>
					                     Il est possible d'enregistrer des évènements 
					                    <br/> 
					                     sur des élements
					                    </p>
					                    <div id="dom-div" style="background-color: tomato; border: 2px solid silver; width: 200px; position: relative; left: 10px">
					                     &nbsp;
					                    </div>
					                    <p>
                                         <button type="button" id="dom-button">Click Me!</button>
					                    </p>
                                        <small><textarea autojslog="js-dom-event" rows="7" cols="60">
var div = document.getElementById("dom-div");
var button = document.getElementById("dom-button");
button.onclick = function() {
  console.log(div.style.left);
  div.style.left = 30 + parseInt(div.style.left) + "px";
};
                                        </textarea></small>
                                        <p><small>
                                         element<b>.style</b> permet d'accéder au style d'un élement
                                        </small></p>
                                        <small>
                                          <div id="js-dom-event" class="autojslog"></div>
                                        </small> 
				</section>
				<section>
					                    <h2>Ajouter de nouveaux éléments</h2>
					                    <p>
					                     <b>document.createElement</b> permet de créer un élement
					                    <br/>
					                     <b>parent.appendChild(element)</b> ajoute un élement 
					                    </p>
					                    <style>
					                     div#dom-new div {
					                       float: left;
					                       width: 50px;
					                       height: 50px;
					                       background-color: tomato;
					                       border: 2px solid silver;
					                       margin: 20px;
					                     }
					                    </style>
					                    <div id="dom-new"></div>
					                    <br style="clear: both"/>
					                    <p>
                                         <button type="button" id="dom-new-button">Add a box !</button>
					                    </p>
                                        <small><textarea autojslog="js-dom-event" rows="7" cols="60">
var div = document.getElementById("dom-new");
var button = document.getElementById("dom-new-button");
button.onclick = function() {
  var element = document.createElement("DIV");
  div.appendChild(element);
};
                                        </textarea></small>
                                        <p><small>
                                         
                                        </small></p>
                                        <small>
                                          <div id="js-dom-event" class="autojslog"></div>
                                        </small> 
				</section>
				
			    <section>
					                    <h2>JSON</h2>
			    </section>
			    <section>
					<h2>JSON ?</h2>
					<blockquote cite="https://en.wikipedia.org/wiki/JSON">
					  &ldquo;JSON (JavaScript Object Notation) is an open-standard format that uses human-readable text to transmit data objects consisting of attribute–value pairs. It is the most common data format used for asynchronous browser/server communication.&rdquo;
					</blockquote>
                                        <p align="right">
                                         source: Wikipedia.com - <a href="https://en.wikipedia.org/wiki/JSON">JSON</a>
                                        </p>
				</section>
				<section>
					<h2>JSON ?</h2>
					<blockquote cite="https://en.wikipedia.org/wiki/Document_Object_Model">
					  &ldquo;JSON (Notation objet JavaScript) est un format standard ouvert qui utilise un texte lisible par un humain pour transmettre des données objets sous forme de couples attribut/valeur. C'est le format d'échange de données le plus couramment utilisé pour la communication asynchrone entre browser et serveur.&rdquo;
					</blockquote>
                                        <p align="right">
                                         source: Wikipedia.com - <a href="https://en.wikipedia.org/wiki/JSON">JSON</a>
                                        </p>
				</section>
			    
			    <section>
					                    <h2>Notation JSON</h2>
					                    <p>
					                     Sous ensemble de la notation sur les objets et les tableaux JavaScript
					                     qui sert de format d'échange de donnée
					                    <br/>
					                     Attention, les noms des clefs doivent être entre "" !
                                        </p>
                                        <small><textarea autojslog="js-json1" rows="12" cols="40">
var aquarium = {
	"name": "my-aquarium",
	"fishs": [{
		"name": "guppi",
		"count": 3
	}, {
		"name": "sushi",
		"count": 2
	}]
  };
console.log(JSON.stringify(aquarium));
                                        </textarea></small>
                                        <small>
                                          <div id="js-json1" class="autojslog"></div>
                                        </small> 
                                        <div><small>
                                         seuls les types primitifs sont suppportés,
                                         boolean, number, string, array &amp; object.
					                    </small></div>
				</section>
			    <section>
					                    <h2>JSON.parse</h2>
					                    <p>
					                     Permet de décoder en JavaScript une chaine de caractère comme un objet JSON 
                                        </p>
                                        <small><textarea autojslog="js-json2" rows="8" cols="55">
var array = JSON.parse('[1, 2, 4, true]');
console.log(array);

var object = JSON.parse('{ "name": "john", "age": 26 }');
console.log(object);

JSON.parse('{ name: "john", age: 26 }');  // oops
                                        </textarea></small>
                                        <p></p>
                                        <small>
                                          <div id="js-json2" class="autojslog"></div>
                                        </small> 
				</section>
			    
			    <section>
					                    <h2>Asynchronous Javascript And XML</h2>
			    </section>
			    <section>
					<h2>AJAX ?</h2>
					<blockquote cite="https://en.wikipedia.org/wiki/Ajax_%28programming%29">
					  &ldquo;Ajax (also AJAX; short for asynchronous JavaScript and XML) is a set of web development techniques using many web technologies on the client-side to create asynchronous Web applications.&rdquo;
					</blockquote>
                                        <p align="right">
                                         source: Wikipedia.com - <a href="https://en.wikipedia.org/wiki/Ajax_%28programming%29">AJAX</a>
                                        </p>
				</section>
				<section>
					<h2>AJAX ?</h2>
					<blockquote cite="https://en.wikipedia.org/wiki/Ajax_%28programming%29">
					  &ldquo;Ajax (aussi AJAX; acronyme pour JavaScript asynchrone et XML) est un ensemble de techniques de developpement web utilisant plusieurs technologies web coté client dans le but de créer des applications Web asynchrones.&rdquo;
					</blockquote>
                                        <p align="right">
                                         source: Wikipedia.com - <a href="https://en.wikipedia.org/wiki/Ajax_%28programming%29">AJAX</a>
                                        </p>
				</section>
				
				<section>
					<h2>AJAX ou AJAP</h2>
					<p>
					 AJAX, permet en Javascript de faire des requètes à un serveur en enregistrant une fonction
					 qui sera exécuter plus tard lorsque les données du serveur seront disponible.
					</p>
					<p>
					 Le fait de faire le traitement plus tard lorsque les données seront présentes est appelé
					 traitement <strong>asynchrone</strong> 
					</p>
					<p>
					 Dans la réalité, on utilise plutôt JSON que XML comme format de transport,
					 mais on garde le nom AJAX (au lieu de AJAP).
					</p>
				</section>    
				<section>
					<h2>XML ou JSON ?</h2>
					<p>
					 JSON est non structuré et non validable facilement donc
					 il est utilisé pour les transferts de petite données (en kilo)
					</p>
					<p>
					 XML est plus lourd mais structuré et validable,
					 il est utilisé pour le tranfert de données plus importante (en méga)
					</p>
				</section>  
				<section>
					<h2>XMLHttpRequest</h2>
					<p>
					 Permet de faire une requète AJAX
					</p>
					<small><textarea autojslog="js-ajax" rows="16" cols="55">
var ajax = new XMLHttpRequest();
ajax.onreadystatechange = function() {
  if (ajax.readyState != 4) {
    return;
  }
  if (ajax.status == 200) {
    var data = JSON.parse(ajax.responseText);
    console.log(data);
  } else {
    console.log('oops ' + ajax.statusText);
  }
};
ajax.open("GET", "images/js-object/demo.json", true);
ajax.overrideMimeType("application/json");
ajax.send();
                    </textarea></small>
                    <p></p>
                    <small>
                      <div id="js-ajax" class="autojslog"></div>
                    </small> 
				</section>
				<section>
					<h2>XMLHttpRequest (2)</h2>
					<p>
					 L'état <b>readyState</b> indique l'état de la requète
					<br/>
					 <b>onreadystatechange</b> est appelée lorsque
					 cet état change
					</p>
					<span style="">
					<small><textarea autojslog="js-ajax2" rows="14" cols="55">
var ajax = new XMLHttpRequest();
ajax.onreadystatechange = function() {
  var state = ajax.readyState;
  var result;
  if (state == 1) { result = "opened"; }
  if (state == 2) { result = "headers_received"; }
  if (state == 3) { result = "loading"; }
  if (state == 4) { result = "done"; }
  console.log(state + '  ' + result);
};
ajax.open("GET", "images/js-object/demo.json", true);
ajax.overrideMimeType("application/json");
ajax.send();
                    </textarea></small>
                    </span><span>
                    <small>
                      <div id="js-ajax2" class="autojslog"></div>
                    </small> 
                    </span>
				</section>
				<section>
					<h2>XMLHttpRequest (3)</h2>
					<p>
					 <b>open(method, url, async?)</b> configure la requète
					<br/>
					 <b>send</b> envoie la requète
					</p>
					<small><textarea autojslog="js-ajax3" rows="8" cols="65">
var ajax = new XMLHttpRequest();
ajax.onreadystatechange = function() {
  console.log(ajax.readyState + ' ' + ajax.status + ' ' + ajax.responseText);
};
ajax.open("GET", "images/js-object/demo.json", true);
ajax.overrideMimeType("application/json");
ajax.send();
                    </textarea></small>
                    <p></p>
                    <small>
                      <div id="js-ajax3" class="autojslog"></div>
                    </small> 
				</section>        
			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
                                        { src: 'plugin/autoeval/autoeval.js', async: true },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>
